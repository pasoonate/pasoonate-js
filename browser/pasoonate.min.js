let AdditionAndSubtraction={addYear(t){var e=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset),t=e.year+t,a=this._currentCalendar.daysInMonth(t,e.month),a=e.day<=a?e.day:a,t=this._currentCalendar.dateToTimestamp(t,e.month,a,e.hour,e.minute,e.second);return this._timestamp=t-this._timezoneOffset,this},addMonth(t){var e=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset),t=e.month+t,a=e.year+Math.ceil(t/12-1),t=t%12==0?12:t%12,s=this._currentCalendar.daysInMonth(a,t),s=e.day<=s?e.day:s,a=this._currentCalendar.dateToTimestamp(a,t,s,e.hour,e.minute,e.second);return this._timestamp=a-this._timezoneOffset,this},addDay(t){return this._timestamp+=86400*t,this},addHour(t){return this._timestamp+=3600*t,this},addMinute(t){return this._timestamp+=60*t,this},addSecond(t){return this._timestamp+=t,this},subYear(t){var e=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset),t=e.year-t,a=this._currentCalendar.daysInMonth(t,e.month),a=e.day<=a?e.day:a,t=this._currentCalendar.dateToTimestamp(t,e.month,a,e.hour,e.minute,e.second);return this._timestamp=t-this._timezoneOffset,this},subMonth(t){var e=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset),t=e.month-t;let a=e.year,s=t;t<=0&&(t=-t,a-=Math.floor(t/12)+1,s=12-t%12);t=this._currentCalendar.daysInMonth(a,s),t=e.day<=t?e.day:t,t=this._currentCalendar.dateToTimestamp(a,s,t,e.hour,e.minute,e.second);return this._timestamp=t-this._timezoneOffset,this},subDay(t){return this._timestamp-=86400*t,this},subHour(t){return this._timestamp-=3600*t,this},subMinute(t){return this._timestamp-=60*t,this},subSecond(t){return this._timestamp-=t,this}},Base={setTimestamp(t){return this._timestamp=t,this},getTimestamp(){return this._timestamp},setTimezoneOffset(t){return this._timezoneOffset=t,this},getTimezoneOffset(){return this._timezoneOffset},setYear(t){var e=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset),t=this._currentCalendar.dateToTimestamp(t,e.month,e.day,e.hour,e.minute,e.second);return this._timestamp=t-this._timezoneOffset,this},getYear(){return this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset).year},setMonth(t){var e=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset),t=this._currentCalendar.dateToTimestamp(e.year,t,e.day,e.hour,e.minute,e.second);return this._timestamp=t-this._timezoneOffset,this},getMonth(){return this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset).month},setDay(t){var e=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset),t=this._currentCalendar.dateToTimestamp(e.year,e.month,t,e.hour,e.minute,e.second);return this._timestamp=t-this._timezoneOffset,this},getDay(){return this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset).day},setHour(t){var e=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset),t=this._currentCalendar.dateToTimestamp(e.year,e.month,e.day,t,e.minute,e.second);return this._timestamp=t-this._timezoneOffset,this},getHour(){return this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset).hour},setMinute(t){var e=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset),t=this._currentCalendar.dateToTimestamp(e.year,e.month,e.day,e.hour,t,e.second);return this._timestamp=t-this._timezoneOffset,this},getMinute(){return this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset).minute},setSecond(t){var e=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset),e=this._currentCalendar.dateToTimestamp(e.year,e.month,e.day,e.hour,e.minute,t);return this._timestamp=e-this._timezoneOffset,this},getSecond(){return this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset).second},setUTCYear(t){var e=this._currentCalendar.timestampToDate(this._timestamp);return this._timestamp=this._currentCalendar.dateToTimestamp(t,e.month,e.day,e.hour,e.minute,e.second),this},getUTCYear(){return this._currentCalendar.timestampToDate(this._timestamp).year},setUTCMonth(t){var e=this._currentCalendar.timestampToDate(this._timestamp);return this._timestamp=this._currentCalendar.dateToTimestamp(e.year,t,e.day,e.hour,e.minute,e.second),this},getUTCMonth(){return this._currentCalendar.timestampToDate(this._timestamp).month},setUTCDay(t){var e=this._currentCalendar.timestampToDate(this._timestamp);return this._timestamp=this._currentCalendar.dateToTimestamp(e.year,e.month,t,e.hour,e.minute,e.second),this},getUTCDay(){return this._currentCalendar.timestampToDate(this._timestamp).day},setUTCHour(t){var e=this._currentCalendar.timestampToDate(this._timestamp);return this._timestamp=this._currentCalendar.dateToTimestamp(e.year,e.month,e.day,t,e.minute,e.second),this},getUTCHour(){return this._currentCalendar.timestampToDate(this._timestamp).hour},setUTCMinute(t){var e=this._currentCalendar.timestampToDate(this._timestamp);return this._timestamp=this._currentCalendar.dateToTimestamp(e.year,e.month,e.day,e.hour,t,e.second),this},getUTCMinute(){return this._currentCalendar.timestampToDate(this._timestamp).minute},setUTCSecond(t){var e=this._currentCalendar.timestampToDate(this._timestamp);return this._timestamp=this._currentCalendar.dateToTimestamp(e.year,e.month,e.day,e.hour,e.minute,t),this},getUTCSecond(){return this._currentCalendar.timestampToDate(this._timestamp).second},setDate(t,e,a){var s=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset),t=this._currentCalendar.dateToTimestamp(t,e,a,s.hour,s.minute,s.second);return this._timestamp=t-this._timezoneOffset,this},getDate(){var t=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset);return{year:t.year,month:t.month,day:t.day}},setTime(t,e,a){var s=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset),s=this._currentCalendar.dateToTimestamp(s.year,s.month,s.day,t,e,a);return this._timestamp=s-this._timezoneOffset,this},getTime(){var t=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset);return{hour:t.hour,minute:t.minute,second:t.second}},setDateTime(t,e,a,s,r,n){t=this._currentCalendar.dateToTimestamp(t,e,a,s,r,n);return this._timestamp=t-this._timezoneOffset,this},getDateTime(){var t=this._currentCalendar.timestampToDate(this._timestamp+this._timezoneOffset);return{year:t.year,month:t.month,day:t.day,hour:t.hour,minute:t.minute,second:t.second}},setUTCDate(t,e,a){var s=this._currentCalendar.timestampToDate(this._timestamp);return this._timestamp=this._currentCalendar.dateToTimestamp(t,e,a,s.hour,s.minute,s.second),this},getUTCDate(){var t=this._currentCalendar.timestampToDate(this._timestamp);return{year:t.year,month:t.month,day:t.day}},setUTCTime(t,e,a){var s=this._currentCalendar.timestampToDate(this._timestamp);return this._timestamp=this._currentCalendar.dateToTimestamp(s.year,s.month,s.day,t,e,a),this},getUTCTime(){var t=this._currentCalendar.timestampToDate(this._timestamp);return{hour:t.hour,minute:t.minute,second:t.second}},setUTCDateTime(t,e,a,s,r,n){return this._timestamp=this._currentCalendar.dateToTimestamp(t,e,a,s,r,n),this},getUTCDateTime(){var t=this._currentCalendar.timestampToDate(this._timestamp);return{year:t.year,month:t.month,day:t.day,hour:t.hour,minute:t.minute,second:t.second}},dayOfWeek(){return this._currentCalendar.dayOfWeek(this._timestamp+this._timezoneOffset)},dayOfYear(){return this._currentCalendar.dayOfYear(this._timestamp+this._timezoneOffset)},weekOfMonth(){return this._currentCalendar.weekOfMonth(this._timestamp+this._timezoneOffset)},weekOfYear(){return this._currentCalendar.weekOfYear(this._timestamp+this._timezoneOffset)}},Comparison={equal(t){return this._timestamp===t._timestamp},afterThan(t){return this._timestamp>t._timestamp},afterThanOrEqual(t){return this._timestamp>=t._timestamp},beforeThan(t){return this._timestamp<t._timestamp},beforeThanOrEqual(t){return this._timestamp<=t._timestamp},between(t,e){return t._timestamp<=this._timestamp&&e._timestamp>=this._timestamp},min(t){return this._timestamp<=t._timestamp?this:t},max(t){return this._timestamp>=t._timestamp?this:t},isWeekday(){return this._currentCalendar.dayOfWeek(this._timestamp+this._timezoneOffset)!==Constants.Friday},isWeekend(){return this._currentCalendar.dayOfWeek(this._timestamp+this._timezoneOffset)===Constants.Friday},isSaturday(){return this._currentCalendar.dayOfWeek(this._timestamp+this._timezoneOffset)===Constants.Saturday},isSunday(){return this._currentCalendar.dayOfWeek(this._timestamp+this._timezoneOffset)===Constants.Sunday},isMonday(){return this._currentCalendar.dayOfWeek(this._timestamp+this._timezoneOffset)===Constants.Monday},isTuesday(){return this._currentCalendar.dayOfWeek(this._timestamp+this._timezoneOffset)===Constants.Tuesday},isWednesday(){return this._currentCalendar.dayOfWeek(this._timestamp+this._timezoneOffset)===Constants.Wednesday},isThursday(){return this._currentCalendar.dayOfWeek(this._timestamp+this._timezoneOffset)===Constants.Thursday},isFriday(){return this._currentCalendar.dayOfWeek(this._timestamp+this._timezoneOffset)===Constants.Friday},isYesterday(){var t=Pasoonate.make().gregorian().subDay(1);return 0===this.gregorian().diffInDays(t)},isToday(){var t=Pasoonate.make().gregorian();return 0===this.gregorian().diffInDays(t)},isTomorrow(){var t=Pasoonate.make().gregorian().addDay(1);return 0===this.gregorian().diffInDays(t)},isFuture(){var t=Pasoonate.make().gregorian();return 1<this.gregorian().diffInDays(t)},isPast(){return 1<Pasoonate.make().gregorian().gregorian().diffInDays(this)},isLeapYear(){return this._currentCalendar.isLeap(this.getYear())},isSameDay(t){return 0===this.gregorian().diffInDays(t)}},Difference={age(t){var t=t.clone(),e=(t.name(this.name()),this.getDateTime()),a=t.getDateTime();let s=e.second-a.second,r=e.minute-a.minute,n=e.hour-a.hour,i=e.day-a.day,o=e.month-a.month,h=e.year-a.year;return s<0&&(s+=Constants.SecondsPerMinute,--r),r<0&&(r+=Constants.MinutesPerHour,--n),n<0&&(n+=Constants.HoursPerDay,--i),i<0&&(--o,i+=t._currentCalendar.daysInMonth(e.year,e.month-1)),o<0&&(o+=12,--h),{years:h,months:o,days:i,hours:n,minutes:r,seconds:s}},diff(t){var t=this.diffInSeconds(t),e=Math.floor(t/Constants.SecondsPerMinute),a=Math.floor(t/Constants.HourInSeconds),s=Math.floor(t/Constants.DayInSeconds),r=Math.floor(s/Constants.MonthInDays);return{years:Math.floor(s/Constants.YearInDays),months:r,days:s,hours:a,minutes:e,seconds:t}},diffInSeconds(t){return Math.abs(this.getTimestamp()-t.getTimestamp())},diffInMinutes(t){t=this.diffInSeconds(t);return t>=Constants.SecondsPerMinute?Math.floor(t/Constants.SecondsPerMinute):0},diffInHours(t){t=this.diffInSeconds(t);return t>=Constants.HourInSeconds?Math.floor(t/Constants.HourInSeconds):0},diffInDays(t){t=this.diffInSeconds(t);return t>=Constants.DayInSeconds?Math.floor(t/Constants.DayInSeconds):0},diffInMonths(t){t=this.diffInSeconds(t);return t>=Constants.MonthInSeconds?Math.floor(t/Constants.MonthInSeconds):0},diffInYears(t){t=this.diffInSeconds(t);return t>=Constants.YearInSeconds?Math.floor(t/Constants.YearInSeconds):0},diffForHumans(t){let e,a,s;var r=[],n=this.name(),i=Pasoonate.make(),t=(s=(this.beforeThan(t)?(e=!1,a=t.clone(),this):(e=!0,a=this.clone(),t)).clone(),a.name(n),s.name(n),i.name(n),a.age(s));return 0<t.years&&r.push(t.years+" "+Pasoonate.trans("diff.year")),0<t.months&&r.push(t.months+" "+Pasoonate.trans("diff.month")),0<t.days&&r.push(t.days+" "+Pasoonate.trans("diff.day")),0<t.hours&&r.push(t.hours+" "+Pasoonate.trans("diff.hour")),0<t.minutes&&r.push(t.minutes+" "+Pasoonate.trans("diff.minute")),0<t.seconds&&r.push(t.seconds+" "+Pasoonate.trans("diff.second")),0===r.length?r.push(Pasoonate.trans("diff.now")):0===i.diff(a).minutes||0===i.diff(s).minutes?r.push(e?Pasoonate.trans("diff.ago"):Pasoonate.trans("diff.from_now")):r.push(e?Pasoonate.trans("diff.before"):Pasoonate.trans("diff.after")),r.join(" ")}},Modifiers={startOfDay(){return this.setTime(0,0,0)},endOfDay(){return this.setTime(23,59,59)},startOfMonth(){return this.setDay(1).startOfDay()},endOfMonth(){return this.setDay(this._currentCalendar.daysInMonth(this.getYear(),this.getMonth())).endOfDay()},startOfYear(){return this.setMonth(1).startOfMonth()},endOfYear(){return this.setMonth(12).endOfMonth()},startOfWeek(){var t=this.dayOfWeek();return this.subDay(t).startOfDay()},endOfWeek(){var t=6-this.dayOfWeek();return this.addDay(t).endOfDay()}};class Calendar{constructor(){this.J1970=2440587.5,this.name=""}getName(){return this.name}timestampToJulianDay(t){var t=t/Constants.DayInSeconds+this.J1970,e=Math.round(1e7*(t-Math.floor(t)))/1e7;return Math.floor(t)+e}julianDayToTimestamp(t){return Math.round((t-this.J1970)*Constants.DayInSeconds)}julianDayWithoutTime(t){return Math.floor(t)+(.5<=t-Math.floor(t)?.5:-.5)}extractJulianDayTime(t){t+=.5;t=Math.round((t-Math.trunc(t))*Constants.DayInSeconds);return{hour:Math.trunc(t/3600),minute:Math.trunc(t/60%60),second:Math.trunc(t%60)}}addTimeToJulianDay(t,e,a,s){var r=this.julianDayToTimestamp(t),e=(t=this.timestampToJulianDay(r+=3600*e+60*a+s),Math.round(1e7*(t-Math.floor(t)))/1e7);return Math.floor(t)+e}dateToJulianDay(t,e,a,s,r,n){}dateToTimestamp(t,e,a,s,r,n){t=this.dateToJulianDay(t,e,a,s,r,n);return this.julianDayToTimestamp(t)}julianDayToDate(t){}timestampToDate(t){t=this.timestampToJulianDay(t);return this.julianDayToDate(t)}daysInMonth(t,e){return 0}dayOfWeek(t){t=this.timestampToJulianDay(t);return this.mod(Math.floor(t+2.5),7)}dayOfYear(t){var t=this.timestampToDate(t),e=this.dateToJulianDay(t.year,1,1,0,0,0),t=this.dateToJulianDay(t.year,t.month,t.day,t.hour,t.minute,t.second);return Math.floor(t-e+1)}weekOfMonth(t){var e=this.timestampToDate(t),a=this.dateToTimestamp(e.year,e.month,1,e.hour,e.minute,e.second),t=this.dayOfWeek(t),a=this.dayOfWeek(a),s=1;return e.day<=7-a?1:s+((e.day-(7-a+(t+1)))/7+1)}weekOfYear(t){var e=this.timestampToDate(t),a=this.dayOfYear(t),e=this.dateToTimestamp(e.year,1,1,e.hour,e.minute,e.second),t=this.dayOfWeek(t),e=this.dayOfWeek(e),s=1;return a<=7-e?1:s+((a-(7-e+(t+1)))/7+1)}mod(t,e){return t-e*Math.floor(t/e)}isLeap(t){}}class CalendarManager{constructor(t,e){this._gregorian=new GregorianCalendar,this._jalali=new JalaliCalendar,this._islamic=new IslamicCalendar,this._shia=new ShiaCalendar,this._currentCalendar=null,this._formatter=Pasoonate.formatter,this._parser=Pasoonate.parser;var a=new Date;this._timestamp=t||Math.floor(a.getTime()/1e3),this._timezoneOffset=e||60*-a.getTimezoneOffset()}gregorian(t){return this._currentCalendar=this._gregorian,t&&this.parse("yyyy-MM-dd HH:mm:ss",t),this}jalali(t){return this._currentCalendar=this._jalali,t&&this.parse("yyyy-MM-dd HH:mm:ss",t),this}islamic(t){return this._currentCalendar=this._islamic,t&&this.parse("yyyy-MM-dd HH:mm:ss",t),this}shia(t){return this._currentCalendar=this._shia,t&&this.parse("yyyy-MM-dd HH:mm:ss",t),this}name(t){if(!t)return this._currentCalendar?this._currentCalendar.getName():"";(t=this["_"+(t=String(t).toLowerCase())])&&(this._currentCalendar=t)}parse(t,e){return(this._parser.calendar=this)._parser.parse(t,e),this}format(t,e){return this._formatter.setCalendar(this),this._formatter.format(t,e)}clone(){return Pasoonate.make(this.getTimestamp(),this.getTimezoneOffset())}}Object.assign(CalendarManager.prototype,Base),Object.assign(CalendarManager.prototype,AdditionAndSubtraction),Object.assign(CalendarManager.prototype,Difference),Object.assign(CalendarManager.prototype,Comparison),Object.assign(CalendarManager.prototype,Modifiers);class GregorianCalendar extends Calendar{constructor(){super(),this.name="gregorian",this.GregorianEpoch=1721425.5,Object.defineProperty(this,"GregorianEpoch",{writable:!1,configurable:!1})}dateToJulianDay(t,e,a,s,r,n){var i=this.GregorianEpoch-1,i=(i=(i=(i=(i+=365*(t-1))+Math.floor((t-1)/4))+-1*Math.floor((t-1)/100))+Math.floor((t-1)/400))+Math.floor((367*e-362)/12+(e<=2?0:this.isLeap(t)?-1:-2)+a);return this.addTimeToJulianDay(i,s,r,n)}julianDayToDate(t){var e=this.extractJulianDayTime(t),t=(t=this.julianDayWithoutTime(t),Math.floor(t-.5)+.5),a=t-this.GregorianEpoch,s=Math.floor(a/146097),a=this.mod(a,146097),r=Math.floor(a/36524),a=this.mod(a,36524),n=Math.floor(a/1461),a=this.mod(a,1461),a=Math.floor(a/365);let i=400*s+100*r+4*n+a;4!==r&&4!==a&&i++;s=t-this.julianDayWithoutTime(this.dateToJulianDay(i,1,1,e.hour,e.minute,e.second)),n=t<this.julianDayWithoutTime(this.dateToJulianDay(i,3,1,e.hour,e.minute,e.second))?0:this.isLeap(i)?1:2,r=Math.floor((12*(s+n)+373)/367),a=t-this.julianDayWithoutTime(this.dateToJulianDay(i,r,1,e.hour,e.minute,e.second))+1;return{year:i,month:r,day:a,hour:e.hour,minute:e.minute,second:e.second}}daysInMonth(t,e){if(e<1||12<e)throw new RangeException("$month Out Of Range Exception");return t&&this.isLeap(t)&&2===e?29:[31,28,31,30,31,30,31,31,30,31,30,31][e-1]}isLeap(t){return t%4==0&&(t%100!=0||t%400==0)}}class IslamicCalendar extends Calendar{constructor(){super(),this.name="islamic",this.IslamicEpoch=1948439.5,Object.defineProperty(this,"IslamicEpoch",{writable:!1,configurable:!1})}dateToJulianDay(t,e,a,s,r,n){var i=a,i=(i=(i=a+Math.ceil(29.5*(e-1))+354*(t-1))+Math.floor((11*t+3)/30))+(this.IslamicEpoch-1);return this.addTimeToJulianDay(i,s,r,n)}julianDayToDate(t){var e=this.extractJulianDayTime(t),a=(t=this.julianDayWithoutTime(t),t=Math.floor(t)+.5,Math.floor((30*(t-this.IslamicEpoch)+10646)/10631)),s=Math.min(12,Math.ceil((t-(29+this.julianDayWithoutTime(this.dateToJulianDay(a,1,1,e.hour,e.minute,e.second))))/29.5)+1);return{year:a,month:s,day:t-this.julianDayWithoutTime(this.dateToJulianDay(a,s,1,e.hour,e.minute,e.second))+1,hour:e.hour,minute:e.minute,second:e.second}}daysInMonth(t,e){if(e<1||12<e)throw new RangeException("$month Out Of Range Exception");return t&&this.isLeap(t)&&12===e?30:[30,29,30,29,30,29,30,29,30,29,30,29][e-1]}isLeap(t){return(11*t+14)%30<11}}class JalaliCalendar extends Calendar{constructor(){super(),this.name=Constants.Jalali,this.JalaliEpoch=1948320.5,Object.defineProperty(this,"JalaliEpoch",{writable:!1,configurable:!1})}dateToJulianDay(t,e,a,s,r,n){var i=0;let o=0;return o=(o+=Math.floor((t-1)*Constants.DaysOfTropicalJalaliYear))+(e<=7?31*(e-1):30*(e-1)+6)+(a-1),this.isLeap(t-1)&&o++,i=(i+=o*Constants.DayInSeconds)+(s*Constants.HourInSeconds+r*Constants.SecondsPerMinute+n),this.timestampToJulianDay(i-=42531868800)}julianDayToDate(t){var t=this.julianDayToTimestamp(t)+42531868800,e=this.mod(t,Constants.SecondsPerMinute),a=Math.floor(this.mod(t,Constants.HourInSeconds)/Constants.SecondsPerMinute),s=Math.floor(this.mod(t,Constants.DayInSeconds)/Constants.HourInSeconds),t=Math.floor(t/Constants.DayInSeconds),r=Math.floor(t/Constants.DaysOfTropicalJalaliYear);let n=Math.floor(t/Constants.DaysOfJalaliYear),i=t-Math.floor(r*Constants.DaysOfTropicalJalaliYear);this.isLeap(r)&&i--,i>=Constants.DaysOfJalaliYear&&!this.isLeap(n)&&(i=0,n++),n===r&&n++;t=Math.floor(i<=186?i/31:(i-6)/30)+1,r=i-(t<=7?31*(t-1):30*(t-1)+6)+1;return{year:n,month:t,day:r,hour:s,minute:a,second:e}}daysInMonth(t,e){if(e<1||12<e)throw new RangeException("$month Out Of Range Exception");return t&&this.isLeap(t)&&e===Constants.MonthsPerYear?30:[31,31,31,31,31,31,30,30,30,30,30,29][e-1]}isLeap(t){var e=t%33;return(t<1343?[1,5,9,13,17,21,26,30]:[1,5,9,13,17,22,26,30]).includes(e)}}class ShiaCalendar extends Calendar{constructor(){super(),this.name="shia",this.ShiaEpoch=1948439.5,Object.defineProperty(this,"ShiaEpoch",{writable:!1,configurable:!1})}dateToJulianDay(e,a,t,s,r,n){var i=this.daysInMonth(e,a);let o=t;var h=this.julianDayFirstOfYear(e);let m=0;i<t&&(o=t-i,e=12===a?e+1:e,a=12===a?1:a+1);for(let t=1;t<a;t++)o+=this.daysInMonth(e,t);return m+=o,h?m+=h-1:m=(m=(m+=(e-1)*Constants.DaysOfShiaYear)+Math.floor((11*e+14)/30))+(this.ShiaEpoch-(1440===e?2:1)),this.addTimeToJulianDay(m,s,r,n)}julianDayToDate(t){var e=this.extractJulianDayTime(t),a=(t=this.julianDayWithoutTime(t),Math.floor((30*(t-this.ShiaEpoch)+10646)/10631));let s=Math.min(12,Math.ceil((t-(29+this.julianDayWithoutTime(this.dateToJulianDay(a,1,1,e.hour,e.minute,e.second))))/29.5)+1);var r=t-this.dateToJulianDay(a,1,1,0,0,0)+1;let n=0;for(let t=1;t<=12;t++)if(r<=(n+=this.daysInMonth(a,t))){s=t;break}t=r-(n-this.daysInMonth(a,s));return{year:a,month:s,day:t,hour:e.hour,minute:e.minute,second:e.second}}daysInMonth(t,e){var a={1435:[29,30,29,30,29,30,29,30,30,30,29,30],1436:[29,30,29,29,30,29,30,29,30,29,30,30],1437:[29,30,30,29,30,29,29,30,29,29,30,30],1438:[29,30,30,30,29,30,29,29,30,29,29,30],1439:[29,30,30,30,30,29,30,29,29,30,29,29],1440:[30,29,30,30,30,29,30,29,30,29,30,29],1441:[29,30,29,30,30,29,30,30,29,30,29,30],1442:[29,29,30,29,30,29,30,30,29,30,30,29],1443:[29,30,30,29,29,30,29,29,30,29,30,30],1444:[30,30,29,30,29,29,30,29,30,29,30,29],1445:[30,30,30,29,30,29,29,30,29,30,29,29],1446:[30,30,30,29,30,30,29,30,29,29,29,30],1447:[29,30,30,29,30,30,30,29,30,29,29,29]};if(e<1||12<e)throw new RangeException("$month Out Of Range Exception");return(void 0===a[t]?[30,29,30,29,30,29,30,29,30,29,30,29]:a[t])[e-1]}julianDayFirstOfYear(t){var e={1435:2456601.5,1436:2456956.5,1437:2457310.5,1438:2457664.5,1439:2458018.5,1440:2458372.5,1441:2458727.5,1442:2459082.5,1443:2459436.5,1444:2459790.5,1445:2460144.5,1446:2460498.5,1447:2460853.5};if(void 0!==e[t])return e[t];var a=Object.keys(e).map(t=>parseInt(t)),s=Math.min(...a),a=Math.max(...a);let r;return r=a<t?e[a]+(t-a)*Constants.DaysOfShiaYear:e[s]-(s-t)*Constants.DaysOfShiaYear}isLeap(t){return(11*t+14)%30<11}}class DateFormat{constructor(){this._calendar=null}setCalendar(t){this._calendar=t instanceof CalendarManager?t:null}getCalendar(){return this._calendar}format(){return null===this.getCalendar()?"":`${this._calendar.getYear()}-${this._calendar.getMonth()}-${this._calendar.getDay()} ${this._calendar.getHour()}:${this._calendar.getMinute()}:`+this._calendar.getSecond()}}class SimpleDateFormat extends DateFormat{constructor(){super()}format(t,e){return this.compile(t,e)}compile(e,t){e=String(e);var a=[];let s="";var r,n;let i=0;for(let t=0;t<e.length;t++)""!==(r=e[t])&&(r===s?a[i]+=r:a[++i]=r,s=r);for(n in a)switch(a[n]){case"yyyy":a[n]=this.getCalendar().getYear();break;case"yy":a[n]=String(this.getCalendar().getYear()).substr(-2,2);break;case"MMMM":a[n]=Pasoonate.trans(this.getCalendar().name()+".month_name."+this.getCalendar().getMonth());break;case"MMM":a[n]=Pasoonate.trans(this.getCalendar().name()+".short_month_name."+this.getCalendar().getMonth());break;case"MM":a[n]=9<this.getCalendar().getMonth()?this.getCalendar().getMonth():"0"+this.getCalendar().getMonth();break;case"M":a[n]=this.getCalendar().getMonth();break;case"dddd":a[n]=Pasoonate.trans(this.getCalendar().name()+".day_name."+this.getCalendar().dayOfWeek());break;case"ddd":a[n]=Pasoonate.trans(this.getCalendar().name()+".short_day_name."+this.getCalendar().dayOfWeek());break;case"dd":a[n]=9<this.getCalendar().getDay()?this.getCalendar().getDay():"0"+this.getCalendar().getDay();break;case"d":a[n]=this.getCalendar().getDay();break;case"HH":a[n]=9<this.getCalendar().getHour()?this.getCalendar().getHour():"0"+this.getCalendar().getHour();break;case"H":a[n]=this.getCalendar().getHour();break;case"mm":a[n]=9<this.getCalendar().getMinute()?this.getCalendar().getMinute():"0"+this.getCalendar().getMinute();break;case"m":a[n]=this.getCalendar().getMinute();break;case"ss":a[n]=9<this.getCalendar().getSecond()?this.getCalendar().getSecond():"0"+this.getCalendar().getSecond();break;case"s":a[n]=this.getCalendar().getSecond()}return a.join("")}}class Parser{_calendar=null;constructor(){}get calendar(){return this._calendar}set calendar(t){this._calendar=t instanceof CalendarManager?t:null}parse(t,e){}}class SimpleParser extends Parser{static FULL_YEAR="yyyy";static SHORT_YEAR="yy";static FULL_MONTH_NAME="MMMM";static SHORT_MONTH_NAME="MMM";static FULL_MONTH="MM";static SHORT_MONTH="M";static SHORT_DAY_NAME="ddd";static FULL_DAY_NAME="dddd";static FULL_DAY="dd";static SHORT_DAY="d";static FULL_HOUR="HH";static SHORT_HOUR="H";static FULL_MINUTE="mm";static SHORT_MINUTE="m";static FULL_SECOND="ss";static SHORT_SECOND="s";constructor(){super()}translate(e){var a={},t=[];let s="";let r,n=0;var i,o,h,m=new Map([[SimpleParser.FULL_YEAR,"(\\d{4})"],[SimpleParser.SHORT_YEAR,"(\\d{2})"],[SimpleParser.FULL_MONTH_NAME,"(\\D+)"],[SimpleParser.SHORT_MONTH_NAME,"(\\D+)"],[SimpleParser.FULL_MONTH,"(\\d{2})"],[SimpleParser.SHORT_MONTH,"(\\d{1,2})"],[SimpleParser.FULL_DAY_NAME,"(\\D+)"],[SimpleParser.SHORT_DAY_NAME,"(\\D+)"],[SimpleParser.FULL_DAY,"(\\d{2})"],[SimpleParser.SHORT_DAY,"(\\d{1,2})"],[SimpleParser.FULL_HOUR,"(\\d{2})"],[SimpleParser.SHORT_HOUR,"(\\d{1,2})"],[SimpleParser.FULL_MINUTE,"(\\d{2})"],[SimpleParser.SHORT_MINUTE,"(\\d{1,2})"],[SimpleParser.FULL_SECOND,"(\\d{2})"],[SimpleParser.SHORT_SECOND,"(\\d{1,2})"]]);for(let t=0;t<e.length;t++)""!==(o=e[t])&&(o===s?(i=a[n]??"",a[n]=i+o):a[++n]=o,s=o);for(h in a){var d=a[h];m.has(d)&&(a[h]=m.get(d),t.push(d))}return{pattern:r=(r=Object.values(a).join("")).replace("/","/").replace(".","."),sequence:t}}match(t,e,a){t=new RegExp(t);if(!t.test(e))return[];var s=t.exec(e),r={};for(let t=1;t<s.length;t++)r[a[t-1]]=s[t];return r}parse(t,e){var a,t=this.translate(t),s=this.match(t.pattern,e,t.sequence),r=this.calendar,n=r.getDateTime();for(a in s){var i=s[a];let t,e;switch(a){case SimpleParser.FULL_YEAR:n.year=+i;break;case SimpleParser.SHORT_YEAR:var o=new CalendarManager;o.name(r.name()),n.year=100*Math.floor(o.getYear()/100)+ +i;break;case SimpleParser.FULL_MONTH:case SimpleParser.SHORT_MONTH:n.month=+i;break;case SimpleParser.FULL_DAY:case SimpleParser.SHORT_DAY:n.day=+i;break;case SimpleParser.FULL_HOUR:case SimpleParser.SHORT_HOUR:n.hour=+i;break;case SimpleParser.FULL_MINUTE:case SimpleParser.SHORT_MINUTE:n.minute=+i;break;case SimpleParser.FULL_SECOND:case SimpleParser.SHORT_SECOND:n.second=+i;break;case SimpleParser.FULL_MONTH_NAME:t=Pasoonate.trans(r.name()+".month_name"),0<(e=t.indexOf(i))&&(n.month=e);break;case SimpleParser.SHORT_MONTH_NAME:t=Pasoonate.trans(r.name()+".short_month_name"),0<(e=t.indexOf(i))&&(n.month=e);break;case SimpleParser.FULL_DAY_NAME:case SimpleParser.SHORT_DAY_NAME:}}r.setDateTime(n.year,n.month,n.day,n.hour,n.minute,n.second)}}let en={gregorian:{day_name:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short_day_name:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_name:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},short_month_name:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"}},jalali:{day_name:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short_day_name:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_name:{1:"Farvardin",2:"Ordibehesht",3:"Khordad",4:"Tir",5:"Mordad",6:"Shahrivar",7:"Mehr",8:"Aban",9:"Azar",10:"Dey",11:"Bahman",12:"Esfand"},short_month_name:{1:"Far",2:"Ord",3:"Khd",4:"Tir",5:"Mrd",6:"Shv",7:"Mhr",8:"Abn",9:"Azr",10:"Dey",11:"Bhm",12:"Esf"}},islamic:{day_name:{0:"Saturday",1:"Sunday",2:"Monday",3:"Tuesday",4:"Wednesday",5:"Thursday",6:"Friday"},short_day_name:{0:"Sat",1:"Sun",2:"Mon",3:"Tue",4:"Wed",5:"Thu",6:"Fri"},month_name:{1:"Muharram",2:"Safar",3:"Rabi al-Awwal",4:"Rabi al-Thani",5:"Jumada al-Awwal",6:"Jumada al-Thani",7:"Rajab",8:"Sha’ban",9:"Ramadan",10:"Shawwal",11:"Dhul-Qadah",12:"Dhul-Hijjah"},short_month_name:{1:"Muh",2:"Saf",3:"Raa",4:"Rat",5:"Jua",6:"Jut",7:"Raj",8:"Sha",9:"Ram",10:"Shw",11:"Dhuq",12:"Dhuh"}},shia:{day_name:{0:"Saturday",1:"Sunday",2:"Monday",3:"Tuesday",4:"Wednesday",5:"Thursday",6:"Friday"},short_day_name:{0:"Sat",1:"Sun",2:"Mon",3:"Tue",4:"Wed",5:"Thu",6:"Fri"},month_name:{1:"Muharram",2:"Safar",3:"Rabi al-Awwal",4:"Rabi al-Thani",5:"Jumada al-Awwal",6:"Jumada al-Thani",7:"Rajab",8:"Sha’ban",9:"Ramadan",10:"Shawwal",11:"Dhul-Qadah",12:"Dhul-Hijjah"},short_month_name:{1:"Muh",2:"Saf",3:"Raa",4:"Rat",5:"Jua",6:"Jut",7:"Raj",8:"Sha",9:"Ram",10:"Shw",11:"Dhuq",12:"Dhuh"}},diff:{year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",before:"before",after:"after",ago:"ago",from_now:"from now",now:"now"}},fa={gregorian:{day_name:{0:"Saturday",1:"Sunday",2:"Monday",3:"Tuesday",4:"Wednesday",5:"Thursday",6:"Friday"},short_day_name:{0:"Sat",1:"Sun",2:"Mon",3:"Tue",4:"Wed",5:"Thu",6:"Fri"},month_name:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},short_month_name:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"}},jalali:{day_name:{0:"شنبه",1:"یک‌شنبه",2:"دوشنبه",3:"سه‌شنبه",4:"چهارشنبه",5:"پنج‌شنبه",6:"جمعه"},short_day_name:{0:"ش",1:"ی",2:"د",3:"س",4:"چ",5:"پ",6:"ج"},month_name:{1:"فروردین",2:"اردیبهشت",3:"خرداد",4:"تیر",5:"مرداد",6:"شهریور",7:"مهر",8:"آبان",9:"آذر",10:"دی",11:"بهمن",12:"اسفند"},short_month_name:{1:"فرو",2:"ارد",3:"خرد",4:"تیر",5:"مرد",6:"شهر",7:"مهر",8:"آبا",9:"آذر",10:"دی",11:"بهم",12:"اسف"}},islamic:{day_name:{0:"السبت",1:"الأحَد",2:"الإثنين",3:"الثلاثاء",4:"الأربعاء",5:"الخميس",6:"الجمعة"},short_day_name:{0:"السبت",1:"الأحَد",2:"الإثنين",3:"الثلاثاء",4:"الأربعاء",5:"الخميس",6:"الجمعة"},month_name:{1:"محرم",2:"صفر",3:"ربیع‌الاول",4:"ربیع‌الثانی",5:"جمادی‌الاول",6:"جمادی‌الثانی",7:"رجب",8:"شعبان",9:"رمضان",10:"شوال",11:"ذیقعده",12:"ذیحجه"},short_month_name:{1:"محرم",2:"صفر",3:"ربیع‌الاول",4:"ربیع‌الثانی",5:"جمادی‌الاول",6:"جمادی‌الثانی",7:"رجب",8:"شعبان",9:"رمضان",10:"شوال",11:"ذیقعده",12:"ذیحجه"}},shia:{day_name:{0:"السبت",1:"الأحَد",2:"الإثنين",3:"الثلاثاء",4:"الأربعاء",5:"الخميس",6:"الجمعة"},short_day_name:{0:"السبت",1:"الأحَد",2:"الإثنين",3:"الثلاثاء",4:"الأربعاء",5:"الخميس",6:"الجمعة"},month_name:{1:"محرم",2:"صفر",3:"ربیع‌الاول",4:"ربیع‌الثانی",5:"جمادی‌الاول",6:"جمادی‌الثانی",7:"رجب",8:"شعبان",9:"رمضان",10:"شوال",11:"ذیقعده",12:"ذیحجه"},short_month_name:{1:"محرم",2:"صفر",3:"ربیع‌الاول",4:"ربیع‌الثانی",5:"جمادی‌الاول",6:"جمادی‌الثانی",7:"رجب",8:"شعبان",9:"رمضان",10:"شوال",11:"ذیقعده",12:"ذیحجه"}},diff:{year:"سال",month:"ماه",day:"روز",hour:"ساعت",minute:"دقیقه",second:"ثانیه",before:"قبل",after:"بعد",ago:"پیش",from_now:"از اکنون",now:"اکنون"}},Constants={J1970:2440587.5,Saturday:0,Sunday:1,Monday:2,Tuesday:3,Wednesday:4,Thursday:5,Friday:6,YearsPerCentury:100,YearsPerDecade:10,MonthsPerYear:12,WeeksPerYear:52,DaysPerWeek:7,HoursPerDay:24,MinutesPerHour:60,SecondsPerMinute:60,HourInSeconds:3600,DayInSeconds:86400,WeekInSeconds:604800,MonthInSeconds:2629743,YearInSeconds:31556926,MonthInDays:30.44,YearInDays:365.24,ShiaEpoch:1948439.5,JalaliEpoch:1948320.5,GregorianEpoch:1721425.5,IslamicEpoch:1948439.5,DaysOfIslamicYear:354,DaysOfShiaYear:354,DaysOfJalaliYear:365,DaysOfTropicalJalaliYear:365.24219878,DaysOfGregorianYear:365,Gregorian:"gregorian",Jalali:"jalali",Shia:"shia",Islamic:"islamic"};class Localization{constructor(){this._langs={},this._locale="fa"}setLang(t,e){this._langs[t]=e}setLocale(t){this._locale=t||this._locale}getLocale(){return this._locale}isLocale(t){return this._locale===t}hasTransKey(t,e){var a=t.split(".");if(void 0===this._langs[e])return!1;let s=this._langs[e];for(let t=0;t<a.length;t++){if(!(a[t]in s))return!1;s=s[a[t]]}return s}getTrans(t,e){e=this.hasTransKey(t,e);return e||t}trans(t,e){return e=e||this._locale,this.getTrans(t=t||"",e)}}class Pasoonate{constructor(){}static make(t,e){return new CalendarManager(t,e)}static trans(t,e){return Pasoonate.localization.trans(t,e)}static setLocale(t){Pasoonate.localization.setLocale(t)}static getLocale(){return Pasoonate.localization.getLocale()}static isLocale(t){return Pasoonate.localization.isLocale(t)}static setFormatter(t){Pasoonate.formatter=t instanceof DateFormat?t:new SimpleDateFormat}static setParser(t){Pasoonate.parser=t instanceof Parser?t:new SimpleParser}static clone(t){return Pasoonate.make(t.getTimestamp(),t.getTimezoneOffset())}}Object.assign(Pasoonate,Constants),Pasoonate.localization=new Localization,Object.defineProperty(Pasoonate,"localization",{writable:!1,configurable:!1}),Pasoonate.formatter=new SimpleDateFormat,Object.defineProperty(Pasoonate,"formatter",{writable:!1,configurable:!1}),Pasoonate.parser=new SimpleParser,Object.defineProperty(Pasoonate,"parser",{writable:!1,configurable:!1}),Pasoonate.localization.setLang("fa",fa);